{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport { Map, TileLayer, Popup, Marker, withLeaflet } from \"react-leaflet\";\nimport \"./config\";\nimport Geocode from \"react-geocode\";\nimport { geocodeByAddress } from \"react-google-places-autocomplete\";\n\nvar MyMarker = function MyMarker(props) {\n  var initMarker = function initMarker(ref) {\n    if (ref) {\n      ref.leafletElement.openPopup();\n    }\n  };\n\n  return __jsx(Marker, _extends({\n    ref: initMarker\n  }, props));\n};\n\nvar MapExample = /*#__PURE__*/function (_Component) {\n  _inherits(MapExample, _Component);\n\n  var _super = _createSuper(MapExample);\n\n  function MapExample(props) {\n    var _this;\n\n    _classCallCheck(this, MapExample);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      currentPos: null,\n      key: 1,\n      address: \"\"\n    };\n    _this.myRef = /*#__PURE__*/React.createRef();\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(MapExample, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {}\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      setTimeout(function () {\n        return _this2.myRef.current.leafletElement.invalidateSize();\n      }, 100);\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(e) {\n      var _this3 = this;\n\n      console.log(e.latlng.lat);\n      console.log(e.latlng.lng);\n      Geocode.setApiKey(\"AIzaSyDzzi_VBcf2Oef6LTViLU767UPNHlnIze4\");\n      Geocode.fromLatLng(e.latlng.lat, e.latlng.lng).then(function (response) {\n        var address = response.results[0].formatted_address;\n        console.log(address);\n        global.config.place.deliver.pickoff = address;\n        global.config.place.deliver.pickofflat = e.latlng.lat;\n        global.config.place.deliver.dropofflang = e.latlng.lng;\n\n        _this3.setState({\n          address: address\n        });\n      }, function (error) {\n        console.error(error);\n      });\n      this.setState({\n        currentPos: e.latlng\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(Map, {\n        ref: this.myRef,\n        className: \"map\",\n        center: this.props.center,\n        zoom: this.props.zoom,\n        onClick: this.handleClick\n      }, __jsx(TileLayer, {\n        attribution: \"\\xA9 <a href=\\\"https://stadiamaps.com/\\\">Stadia Maps</a>, \\xA9 <a href=\\\"https://openmaptiles.org/\\\">OpenMapTiles</a> \\xA9 <a href=\\\"http://openstreetmap.org\\\">OpenStreetMap</a> contributors\",\n        url: \"https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png\"\n      }), this.state.currentPos && __jsx(MyMarker, {\n        position: this.state.currentPos\n      }, __jsx(Popup, {\n        position: this.state.currentPos\n      }, \"Current location: \", __jsx(\"pre\", null, this.state.address))));\n    }\n  }]);\n\n  return MapExample;\n}(Component);\n\nexport default MapExample;","map":null,"metadata":{},"sourceType":"module"}